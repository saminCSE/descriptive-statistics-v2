<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Descriptive Statistics Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        padding: 40px;
      }

      h1 {
        text-align: center;
        color: #2d3748;
        margin-bottom: 10px;
        font-size: 2.5em;
        font-weight: 700;
      }

      .subtitle {
        text-align: center;
        color: #718096;
        margin-bottom: 40px;
        font-size: 1.1em;
      }

      .table-container {
        overflow-x: auto;
        margin-bottom: 40px;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      table {
        width: 100%;
        border-collapse: collapse;
        background: white;
      }

      th {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 16px;
        text-align: left;
        font-weight: 600;
        font-size: 0.95em;
      }

      td {
        padding: 14px 16px;
        border-bottom: 1px solid #e2e8f0;
        color: #4a5568;
      }

      tr:hover {
        background: #f7fafc;
      }

      .significant {
        background: #fff5f5;
        font-weight: 600;
      }

      .significant td:last-child {
        color: #e53e3e;
        font-weight: 700;
      }

      .charts-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 30px;
        margin-top: 40px;
      }

      .chart-container {
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .chart-container.full-width {
        grid-column: 1 / -1;
      }

      .chart-title {
        font-size: 1.3em;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 20px;
        text-align: center;
      }

      canvas {
        max-height: 350px;
      }

      .legend {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 20px;
        flex-wrap: wrap;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.9em;
        color: #4a5568;
      }

      .legend-color {
        width: 20px;
        height: 20px;
        border-radius: 4px;
      }

      @media (max-width: 768px) {
        .charts-grid {
          grid-template-columns: 1fr;
        }

        .container {
          padding: 20px;
        }

        h1 {
          font-size: 1.8em;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Descriptive Statistics and Group Comparison</h1>
      <p class="subtitle">Table 1: Key Metrics by Group</p>

      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Variable</th>
              <th>Total Mean (SD)</th>
              <th>No Side-hole Pass Mean (SD)</th>
              <th>At Least One Side-hole Pass Mean (SD)</th>
              <th>P-value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Age (years)</strong></td>
              <td>57.7 (10.4)</td>
              <td>57.8 (9.4)</td>
              <td>57.7 (11.7)</td>
              <td>0.950</td>
            </tr>
            <tr>
              <td><strong>Height (cm)</strong></td>
              <td>162.7 (7.4)</td>
              <td>164.1 (6.1)</td>
              <td>161.3 (8.5)</td>
              <td>0.339</td>
            </tr>
            <tr class="significant">
              <td><strong>NG length (mm)</strong></td>
              <td>473.5 (27.9)</td>
              <td>488.6 (23.4)</td>
              <td>458.4 (23.9)</td>
              <td>0.003*</td>
            </tr>
            <tr class="significant">
              <td><strong>EX length (mm)</strong></td>
              <td>358.5 (25.6)</td>
              <td>348.1 (22.8)</td>
              <td>368.9 (24.5)</td>
              <td>0.020*</td>
            </tr>
            <tr class="significant">
              <td><strong>NEX length (mm)</strong></td>
              <td>511.5 (29.9)</td>
              <td>500.0 (27.0)</td>
              <td>523.0 (28.9)</td>
              <td>0.036*</td>
            </tr>
            <tr>
              <td><strong>NE length (mm)</strong></td>
              <td>153.0 (10.0)</td>
              <td>151.9 (11.0)</td>
              <td>154.0 (9.2)</td>
              <td>0.772</td>
            </tr>
            <tr>
              <td><strong>GX length (mm)</strong></td>
              <td>403.3 (26.5)</td>
              <td>401.8 (26.7)</td>
              <td>404.8 (27.1)</td>
              <td>0.787</td>
            </tr>
            <tr>
              <td><strong>GU length (mm)</strong></td>
              <td>559.0 (34.6)</td>
              <td>557.6 (31.2)</td>
              <td>560.3 (38.8)</td>
              <td>0.494</td>
            </tr>
          </tbody>
        </table>
      </div>

      <p
        style="
          text-align: center;
          color: #e53e3e;
          font-weight: 600;
          margin-bottom: 30px;
        "
      >
        *p < 0.05 (significant differences)
      </p>

      <div class="charts-grid">
        <div class="chart-container full-width">
          <h3 class="chart-title">Comparison of All Variables by Group</h3>
          <canvas id="groupedBarChart"></canvas>
        </div>

        <div class="chart-container">
          <h3 class="chart-title">Significant Variables Only (p < 0.05)</h3>
          <canvas id="significantChart"></canvas>
        </div>

        <div class="chart-container">
          <h3 class="chart-title">P-value Distribution</h3>
          <canvas id="pValueChart"></canvas>
        </div>

        <div class="chart-container">
          <h3 class="chart-title">Standard Deviation Comparison</h3>
          <canvas id="sdChart"></canvas>
        </div>

        <div class="chart-container">
          <h3 class="chart-title">Percentage Difference Between Groups</h3>
          <canvas id="percentDiffChart"></canvas>
        </div>
      </div>
    </div>

    <script>
      const colors = {
        primary: "#667eea",
        secondary: "#764ba2",
        noSidehole: "#48bb78",
        sidehole: "#ed8936",
        significant: "#e53e3e",
      };

      // Data
      const variables = ["Age", "Height", "NG", "EX", "NEX", "NE", "GX", "GU"];
      const noSideholeData = [
        57.8, 164.1, 488.6, 348.1, 500.0, 151.9, 401.8, 557.6,
      ];
      const sideholeData = [
        57.7, 161.3, 458.4, 368.9, 523.0, 154.0, 404.8, 560.3,
      ];
      const pValues = [0.95, 0.339, 0.003, 0.02, 0.036, 0.772, 0.787, 0.494];
      const sdNoSidehole = [9.4, 6.1, 23.4, 22.8, 27.0, 11.0, 26.7, 31.2];
      const sdSidehole = [11.7, 8.5, 23.9, 24.5, 28.9, 9.2, 27.1, 38.8];

      // Chart 1: Grouped Bar Chart - All Variables
      new Chart(document.getElementById("groupedBarChart"), {
        type: "bar",
        data: {
          labels: variables,
          datasets: [
            {
              label: "No Side-hole Pass",
              data: noSideholeData,
              backgroundColor: colors.noSidehole,
              borderRadius: 6,
            },
            {
              label: "At Least One Side-hole Pass",
              data: sideholeData,
              backgroundColor: colors.sidehole,
              borderRadius: 6,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: {
              display: true,
              position: "top",
              labels: {
                font: { size: 12, weight: "600" },
                padding: 15,
              },
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: "#e2e8f0" },
            },
            x: {
              grid: { display: false },
            },
          },
        },
      });

      // Chart 2: Significant Variables Only
      const sigVars = ["NG", "EX", "NEX"];
      const sigNoSidehole = [488.6, 348.1, 500.0];
      const sigSidehole = [458.4, 368.9, 523.0];

      new Chart(document.getElementById("significantChart"), {
        type: "bar",
        data: {
          labels: sigVars,
          datasets: [
            {
              label: "No Side-hole Pass",
              data: sigNoSidehole,
              backgroundColor: colors.noSidehole,
              borderRadius: 8,
            },
            {
              label: "At Least One Side-hole Pass",
              data: sigSidehole,
              backgroundColor: colors.sidehole,
              borderRadius: 8,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: {
              display: true,
              position: "top",
              labels: { font: { size: 11, weight: "600" } },
            },
          },
          scales: {
            y: {
              beginAtZero: false,
              min: 300,
              grid: { color: "#e2e8f0" },
            },
          },
        },
      });

      // Chart 3: P-value Chart
      new Chart(document.getElementById("pValueChart"), {
        type: "line",
        data: {
          labels: variables,
          datasets: [
            {
              label: "P-value",
              data: pValues,
              borderColor: colors.primary,
              backgroundColor: "rgba(102, 126, 234, 0.1)",
              fill: true,
              tension: 0.4,
              pointRadius: 6,
              pointHoverRadius: 8,
              pointBackgroundColor: pValues.map((p) =>
                p < 0.05 ? colors.significant : colors.primary
              ),
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: { display: false },
            annotation: {
              annotations: {
                line1: {
                  type: "line",
                  yMin: 0.05,
                  yMax: 0.05,
                  borderColor: colors.significant,
                  borderWidth: 2,
                  borderDash: [5, 5],
                },
              },
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 1,
              grid: { color: "#e2e8f0" },
              title: {
                display: true,
                text: "P-value (significance at 0.05)",
                font: { weight: "600" },
              },
            },
          },
        },
      });

      // Chart 4: Standard Deviation Comparison
      new Chart(document.getElementById("sdChart"), {
        type: "radar",
        data: {
          labels: variables,
          datasets: [
            {
              label: "No Side-hole Pass SD",
              data: sdNoSidehole,
              borderColor: colors.noSidehole,
              backgroundColor: "rgba(72, 187, 120, 0.2)",
              pointBackgroundColor: colors.noSidehole,
              pointRadius: 4,
            },
            {
              label: "At Least One Side-hole Pass SD",
              data: sdSidehole,
              borderColor: colors.sidehole,
              backgroundColor: "rgba(237, 137, 54, 0.2)",
              pointBackgroundColor: colors.sidehole,
              pointRadius: 4,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: {
              display: true,
              position: "top",
              labels: { font: { size: 11, weight: "600" } },
            },
          },
          scales: {
            r: {
              beginAtZero: true,
              grid: { color: "#e2e8f0" },
            },
          },
        },
      });

      // Chart 5: Percentage Difference
      const percentDiff = variables.map((v, i) =>
        (
          ((sideholeData[i] - noSideholeData[i]) / noSideholeData[i]) *
          100
        ).toFixed(2)
      );

      new Chart(document.getElementById("percentDiffChart"), {
        type: "bar",
        data: {
          labels: variables,
          datasets: [
            {
              label: "% Difference",
              data: percentDiff,
              backgroundColor: percentDiff.map((v, i) =>
                pValues[i] < 0.05 ? colors.significant : colors.primary
              ),
              borderRadius: 6,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          indexAxis: "y",
          plugins: {
            legend: { display: false },
          },
          scales: {
            x: {
              grid: { color: "#e2e8f0" },
              title: {
                display: true,
                text: "Percentage Difference (%)",
                font: { weight: "600" },
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
